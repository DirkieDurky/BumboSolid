@model BumboSolid.Web.Models.HolidayManageViewModel

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="https://kit.fontawesome.com/981e782106.js" crossorigin="anonymous"></script>

<form asp-action="Bewerken" method="post">
	<div class="modal-body auto-margin">
		<input type="text" class="form-control" asp-for="Holiday" />
		<span asp-validation-for="Holiday" class="text-danger"></span>
	</div>

	<div class="d-flex flex-row">
		<div>
			<div class="d-flex flex-row">
				<h6 id="graph-impact-title">Invloed</h6>

				<canvas id="holiday-chart"></canvas>

				<script>
					const xValues = @Html.Raw(Json.Serialize(Model.xValues))
					const yValues = @Html.Raw(Json.Serialize(Model.yValues))

						new Chart("holiday-chart", {
							type: "line",
							data: {
								labels: xValues,
								datasets: [{
									fill: false,
									lineTension: 0,
									backgroundColor: "rgba(0,0,255,1.1)",
									borderColor: "rgba(0,0,0,1.1)",
									data: yValues
								}]
							},
							options: {
								legend: { display: false },
								scales: {
									yAxes: [{ ticks: { min: @Model.LowestImpact, max: @Model.HighestImpact } }],
								}
							}
						});
				</script>

			</div>

			<h6 id="graph-days-title">Dagen</h6>

			<div class="d-flex flex-row">
				<div>
					
					<input type="text" class="p-2 form-control holiday-date" asp-for="FirstDay" />
					<span asp-validation-for="FirstDay" class="text-danger"></span>
				</div>
				<div>
					<input type="text" class="p-2 form-control holiday-date" asp-for="LastDay" value="@Model.LastDay.Day-@Model.LastDay.Month" />
					<span asp-validation-for="LastDay" class="text-danger"></span>
				</div>
				<a class="p-2 holiday-date remove-text-decoration"><span class="fa-solid fa-trash-can"></span></a>
				@Html.ActionLink("Verwijderen", "Verwijderen", new { Name = Model.Holiday.Name })
			</div>
		</div>

		<div>
			<h6>Invloed Aanpassen</h6>

			<div id="holidays-scrollbar">
				@foreach (var holidayDay in Model.Holiday.HolidayDays.ToList())
				{
					<div class="d-flex flex-row">
						<input class="p-2 form-control holiday-date" value="@holidayDay.Date.Day-@holidayDay.Date.Month" readonly>
						<div class="p-2 holiday-date">
							<input type="text" class="form-control" asp-for="@holidayDay.Impact" />
							<span asp-validation-for="@holidayDay.Impact" class="text-danger"></span>
						</div>
					</div>
				}
			</div>
		</div>

	</div>
	<div class="d-flex flex-row">
		<a type="button" class="btn btn-primary" asp-action="Index">Terug</a>
		<button type="submit" class="btn btn-primary">Opslaan & Bijwerken</button>
	</div>
</form>
